<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Al Mushaf Al Mufassir</title>
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2319/2319830.png">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2319/2319830.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#004d40">

    <style>
        :root {
            --dark-green: #004d40;
            --gold: #c19b6c;
            --bg-gray: #e0e4e7;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background-color: var(--bg-gray);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
        }

        .header {
            background-color: var(--dark-green);
            color: white;
            width: 100%;
            padding: 15px 0;
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            border-bottom: 3px solid var(--gold);
        }

        .hadith-marquee {
            background-color: #112b25;
            color: var(--gold);
            padding: 10px 0;
            width: 100%;
            font-size: 14px;
            font-weight: bold;
            border-bottom: 1px solid var(--gold);
        }

        .main-content {
            width: 90%;
            max-width: 450px;
            margin-top: 20px;
        }

        .timer-header-box {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .side-icon-box {
            background: #111;
            padding: 12px;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .hero-timer-card {
            flex-grow: 1;
            background: linear-gradient(135deg, #1e3d33, #2d5d4e);
            padding: 20px;
            border-radius: 22px;
            color: white;
            text-align: center;
        }

        #timer { font-size: 38px; font-weight: 900; direction: ltr; margin: 5px 0; }
        .p-label-ar { color: var(--gold); font-size: 16px; font-weight: bold; }

        .section-card {
            background: var(--white);
            width: 100%;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .section-title {
            color: #2d5d4e;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: right;
            font-size: 18px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }

        .btn-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .btn-custom {
            border: none;
            padding: 14px 10px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 13px;
            color: white;
            cursor: pointer;
        }

        .btn-gold { background-color: var(--gold); }
        .btn-red { background-color: #b33a3a; }
        .btn-gray { background-color: #666; }

        .prayer-row {
            display: flex;
            justify-content: space-between;
            padding: 14px 18px;
            background: #f8f9fa;
            margin-bottom: 10px;
            border-radius: 15px;
            border: 1px solid #eee;
        }

        .prayer-row b { font-size: 17px; color: #444; }
        .prayer-row span { font-size: 17px; color: var(--dark-green); font-weight: bold; }

        /* Box Al Mushaf Al Mufassir */
        .quran-web-box {
            background: #f0f8f7;
            padding: 18px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid var(--dark-green);
        }

        .quran-web-box a {
            color: var(--dark-green);
            text-decoration: none;
            font-size: 20px;
            font-weight: 900;
        }
    </style>
</head>
<body>

    <div class="header">Al Mushaf Al Mufassir</div>

    <div class="hadith-marquee">
        <marquee scrollamount="4" direction="right" id="hadith-list">
            Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨ÙˆÙŠØ©...
        </marquee>
    </div>

    <div class="main-content">
        
        <div class="timer-header-box">
            <div class="side-icon-box">
                <img src="https://cdn-icons-png.flaticon.com/512/2319/2319830.png" width="55">
            </div>
            <div class="hero-timer-card">
                <div class="p-label-ar" id="p-name">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ù…ØºØ±Ø¨</div>
                <div id="timer">00:00:00</div>
            </div>
        </div>

        <div class="section-card">
            <div class="section-title">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Controlli)</div>
            <div class="btn-container">
                <button class="btn-custom btn-gold" onclick="askPermission()">ğŸ”” ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø°Ø§Ù†</button>
                <button class="btn-custom btn-gray" onclick="stopAdhan()">â¹ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø£Ø°Ø§Ù†</button>
                <button class="btn-custom btn-red">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                <button class="btn-custom btn-red" onclick="stopAdhan()">Fermare Adhan</button>
            </div>
            <div style="margin-top:20px; text-align:right;">
                <input type="range" id="volControl" min="0" max="1" step="0.1" value="0.7" style="width:70%;"> : Volume
            </div>
        </div>

        <div class="section-card">
            <div class="quran-web-box">
                <a href="https://easyquran.com" target="_blank">ğŸ“– Al Mushaf Al Mufassir</a>
            </div>
        </div>

        <div class="section-card">
            <div class="section-title">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© (Orari)</div>
            <div id="prayer-list"></div>
        </div>

    </div>

    <script>
        const hadiths = [
            "Ù‚Ø§Ù„ ï·º: Ù…ÙÙ†Ù’ ØµÙØ§Ù…Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù Ø¥ÙÙŠÙ…ÙØ§Ù†Ù‹Ø§ ÙˆÙØ§Ø­Ù’ØªÙØ³ÙØ§Ø¨Ù‹Ø§ ØºÙÙÙØ±Ù Ù„ÙÙ‡Ù Ù…ÙØ§ ØªÙÙ‚ÙØ¯Ù‘ÙÙ…Ù Ù…ÙÙ†Ù’ Ø°ÙÙ†Ù’Ø¨ÙÙ‡Ù (Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ ÙˆÙ…Ø³Ù„Ù…)",
            "Ù‚Ø§Ù„ ï·º: ØªÙØ³ÙØ­Ù‘ÙØ±ÙÙˆØ§ ÙÙØ¥ÙÙ†Ù‘Ù ÙÙÙŠ Ø§Ù„Ø³Ù‘ÙØ­ÙÙˆØ±Ù Ø¨ÙØ±ÙÙƒÙØ©Ù‹ (Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ ÙˆÙ…Ø³Ù„Ù…)",
            "Ù‚Ø§Ù„ ï·º: Ø¥ÙØ°ÙØ§ Ø¬ÙØ§Ø¡Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù ÙÙØªÙØ­ÙØªÙ’ Ø£ÙØ¨Ù’ÙˆÙØ§Ø¨Ù Ø§Ù„Ù’Ø¬ÙÙ†Ù‘ÙØ©Ù (Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ ÙˆÙ…Ø³Ù„Ù…)",
            "Ù‚Ø§Ù„ ï·º: Ø§Ù„ØµÙ‘ÙÙŠÙØ§Ù…Ù Ø¬ÙÙ†Ù‘ÙØ©ÙŒ (Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ ÙˆÙ…Ø³Ù„Ù…)",
            "Ù‚Ø§Ù„ ï·º: Ù…ÙÙ†Ù’ Ù„ÙÙ…Ù’ ÙŠÙØ¯ÙØ¹Ù’ Ù‚ÙÙˆÙ’Ù„Ù Ø§Ù„Ø²Ù‘ÙÙˆØ±Ù ÙÙÙ„ÙÙŠÙ’Ø³Ù Ù„ÙÙ„Ù‘ÙÙ‡Ù Ø­ÙØ§Ø¬ÙØ©ÙŒ ÙÙÙŠ Ø£ÙÙ†Ù’ ÙŠÙØ¯ÙØ¹Ù Ø·ÙØ¹ÙØ§Ù…ÙÙ‡Ù (Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ)"
        ];

        document.getElementById('hadith-list').innerHTML = hadiths.join(" &nbsp;&nbsp;&nbsp; â€¢ &nbsp;&nbsp;&nbsp; ");

        // Dati di esempio (Aggiungi qui i tuoi dati reali)
        const data = [{"d":"24/2","f":"05:36","dh":"12:24","a":"15:25","m":"17:54","i":"19:12"}];
        const names = {"Fajr":"Ø§Ù„ÙØ¬Ø±","Dhuhr":"Ø§Ù„Ø¸Ù‡Ø±","Asr":"Ø§Ù„Ø¹ØµØ±","Maghrib":"Ø§Ù„Ù…ØºØ±Ø¨","Ishaa":"Ø§Ù„Ø¹Ø´Ø§Ø¡"};
        const audio = new Audio('https://www.islamcan.com/audio/adhan/azan1.mp3');
        let lastNotified = "";

        function update() {
            const now = new Date();
            const today = data[0];
            let listHtml = "";
            const prayers = [{n:"Fajr",t:today.f}, {n:"Dhuhr",t:today.dh}, {n:"Asr",t:today.a}, {n:"Maghrib",t:today.m}, {n:"Ishaa",t:today.i}];

            prayers.forEach(p => {
                const [h, m] = p.t.split(":");
                const pTime = new Date(); pTime.setHours(h, m, 0);
                const diff = pTime - now;

                if (now.getHours().toString().padStart(2,"0")+":"+now.getMinutes().toString().padStart(2,"0") === p.t && lastNotified !== p.t) {
                    if(Notification.permission === "granted") {
                        new Notification("ğŸŒ™ Ø­Ø§Ù† Ø§Ù„Ø¢Ù† ÙˆÙ‚Øª ØµÙ„Ø§Ø© " + names[p.n]);
                        audio.play();
                    }
                    lastNotified = p.t;
                }

                if(p.n === "Maghrib" && diff > 0) {
                    const hh = Math.floor(diff/3600000).toString().padStart(2,"0");
                    const mm = Math.floor((diff%3600000)/60000).toString().padStart(2,"0");
                    const ss = Math.floor((diff%60000)/1000).toString().padStart(2,"0");
                    document.getElementById("timer").innerText = hh + ":" + mm + ":" + ss;
                }
                listHtml += `<div class="prayer-row"><b>${names[p.n]}</b><span>${p.t}</span></div>`;
            });
            document.getElementById("prayer-list").innerHTML = listHtml;
        }

        function askPermission() {
            Notification.requestPermission().then(p => { 
                if(p === 'granted') { audio.play(); setTimeout(() => audio.pause(), 1000); }
            });
        }

        function stopAdhan() { audio.pause(); }

        setInterval(update, 1000);
        update();
    </script>
</body>
</html>
