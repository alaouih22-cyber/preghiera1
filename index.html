<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Muslim Pro Gold - Bastia Umbra</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Montserrat:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --mp-dark-green: #004F3F; 
            --mp-gold: #C5A059; 
            --mp-light-gold: #E5C17E;
            --white: #ffffff;
            --night-bg: #0A0A0A;
        }

        body.night-mode { background-color: var(--night-bg); color: #EEE; }
        body { 
            background-color: #F6F7F9; margin: 0; padding: 0;
            display: flex; flex-direction: column; height: 100vh; 
            overflow: hidden; font-family: 'Montserrat', sans-serif; transition: 0.5s;
        }

        /* HEADER CON FANOUS DORATI */
        .ramadan-header {
            width: 100%; background: linear-gradient(180deg, var(--mp-dark-green) 0%, #00362B 100%);
            padding: 30px 0; text-align: center; border-bottom: 5px solid var(--mp-gold);
            position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.4);
            display: flex; justify-content: center; align-items: center;
        }
        
        /* Animazione Fanous */
        .fanous-gold { 
            color: var(--mp-gold); font-size: 45px; 
            filter: drop-shadow(0 0 12px var(--mp-gold));
            animation: swing 3s infinite ease-in-out;
            margin: 0 20px;
        }
        @keyframes swing {
            0%, 100% { transform: rotate(12deg); }
            50% { transform: rotate(-12deg); }
        }
        
        .ramadan-title { 
            color: var(--mp-gold); font-size: 42px; margin: 0; 
            font-weight: 900; font-family: 'Amiri', serif;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
        }

        .menu-btn { position: absolute; left: 25px; color: var(--mp-gold); cursor: pointer; font-size: 32px; }

        /* NOTIFICA POPUP LUXURY */
        #notif-popup {
            position: fixed; top: -250px; left: 50%; transform: translateX(-50%); width: 85%;
            background: linear-gradient(135deg, var(--mp-gold) 0%, #8B6B32 100%); color: white;
            padding: 25px; border-radius: 30px; text-align: center; font-weight: 900; z-index: 10000;
            transition: 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 3px solid #FFF;
        }

        /* QUADRETTI DASHBOARD */
        .dashboard { display: flex; justify-content: center; gap: 15px; width: 92%; margin: 20px auto; }
        .grid-box { 
            background: white; border: 2.5px solid var(--mp-gold); border-radius: 20px; 
            padding: 15px; flex: 1; text-align: center; box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .grid-box i { color: var(--mp-gold); font-size: 24px; margin-bottom: 8px; }
        .grid-value { font-size: 24px; font-weight: 900; color: var(--mp-dark-green); }

        /* BANANE PREGHIERE (ICONE ORO) */
        .prayer-nav { 
            display: flex; justify-content: space-around; width: 94%; margin: 10px auto; 
            background: white; padding: 15px; border-radius: 25px; border: 1px solid #ddd;
        }
        .p-icon { text-align: center; flex: 1; transition: 0.5s; opacity: 0.3; }
        .p-icon i { font-size: 26px; color: var(--mp-dark-green); }
        .p-icon span { display: block; font-size: 11px; font-weight: 900; margin-top: 5px; }
        .p-icon.active { opacity: 1; transform: scale(1.2); }
        .p-icon.active i { color: var(--mp-gold); filter: drop-shadow(0 0 8px var(--mp-gold)); }

        /* MAIN CONTENT & HAWASH */
        .main-content { flex-grow: 1; display: flex; flex-direction: column; width: 100%; overflow: hidden; }
        #external-site { width: 100%; height: 100%; border: none; }
        .hawash-bar { 
            background: var(--mp-gold); color: var(--mp-dark-green); padding: 18px; 
            text-align: center; font-weight: 900; font-size: 18px; border-top: 3px solid #fff;
        }

        /* SIDEBAR TRE STRISCE */
        .sidebar { 
            position: fixed; top: 0; left: -350px; width: 300px; height: 100%; 
            background: var(--mp-dark-green); z-index: 9999; transition: 0.5s; padding: 30px; color: white;
            box-shadow: 15px 0 50px rgba(0,0,0,0.6);
        }
        .sidebar.open { left: 0; }
        .tool-box { background: rgba(255,255,255,0.08); padding: 15px; border-radius: 15px; margin-bottom: 15px; border: 1px solid var(--mp-gold); }
        .menu-item { 
            background: linear-gradient(90deg, var(--mp-gold), #8B6B32); color: white; border: none; 
            padding: 15px; border-radius: 12px; width: 100%; font-weight: 800; cursor: pointer; margin-top: 10px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        /* STRISCIA HADITH SCORREVOLE */
        .hadith-footer { width: 100%; background: var(--mp-dark-green); padding: 15px 0; border-top: 4px solid var(--mp-gold); overflow: hidden; }
        .hadith-track { display: flex; width: max-content; animation: scroll-hadith 50s linear infinite; }
        .hadith-text { color: var(--mp-gold); font-weight: 700; font-size: 17px; white-space: nowrap; padding-right: 100px; font-family: 'Amiri', serif; }
        @keyframes scroll-hadith { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
    </style>
</head>
<body class="night-mode">

    <div id="notif-popup">
        <i id="notif-icon" class="fas fa-bell" style="font-size: 40px;"></i><br>
        <span id="notif-title" style="font-size: 26px; display: block; margin: 10px 0;"></span>
        <span id="notif-msg" style="font-size: 18px;"></span>
    </div>

    <header class="ramadan-header">
        <div class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
        <i class="fas fa-lantern fanous-gold"></i>
        <h1 class="ramadan-title">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</h1>
        <i class="fas fa-lantern fanous-gold"></i>
    </header>

    <div class="dashboard">
        <div class="grid-box">
            <i class="fas fa-stopwatch"></i>
            <div class="grid-label">Prossimo Athan</div>
            <div class="grid-value" id="countdown">00:00:00</div>
        </div>
        <div class="grid-box">
            <i class="fas fa-users-rectangle"></i>
            <div class="grid-label">Iqama Bastia</div>
            <div class="grid-value" id="iqama-time">--:--</div>
        </div>
    </div>

    <div class="prayer-nav">
        <div class="p-icon" id="p-fajr"><i class="fas fa-cloud-moon"></i><span>Fajr</span></div>
        <div class="p-icon" id="p-dhuhr"><i class="fas fa-sun"></i><span>Dhuhr</span></div>
        <div class="p-icon" id="p-asr"><i class="fas fa-cloud-sun"></i><span>Asr</span></div>
        <div class="p-icon" id="p-maghrib"><i class="fas fa-moon"></i><span>Maghrib</span></div>
        <div class="p-icon" id="p-isha"><i class="fas fa-star-and-crescent"></i><span>Isha</span></div>
    </div>

    <main class="main-content">
        <iframe id="external-site" src="https://m.search.it.com/search?q=orari+preghiera+bastia+umbra"></iframe>
        <div class="hawash-bar" id="hawash-display">ðŸ“¢ Stato Moschea: Benvenuti</div>
    </main>

    <nav class="sidebar" id="sidebar">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 style="color:var(--mp-gold);">MUSLIM PRO</h2>
            <div onclick="toggleMenu()" style="font-size:30px; cursor:pointer; color:var(--mp-gold);">&times;</div>
        </div>
        <div class="tool-box">
            <button class="menu-item" onclick="addTasbih()"><i class="fas fa-fingerprint"></i> Tasbih: <span id="t-count">0</span></button>
            <button class="menu-item" onclick="calcZakat()"><i class="fas fa-calculator"></i> Zakat 2.5%</button>
            <button class="menu-item" onclick="window.open('https://www.mp3quran.net/ar/radio', '_blank')"><i class="fas fa-radio"></i> Radio Quran</button>
        </div>
        <div class="tool-box">
            <span style="color:var(--mp-gold); font-size:12px; font-weight:bold;">MODIFICA HAWASH</span>
            <textarea id="mosque-input" oninput="updateHawash(this.value)" style="width:100%; border-radius:10px; margin-top:5px;"></textarea>
        </div>
        <button class="menu-item" style="background:#222;" onclick="toggleNight()"><i class="fas fa-moon"></i> Notte Serena</button>
    </nav>

    <footer class="hadith-footer">
        <div class="hadith-track" id="hadith-track"></div>
    </footer>

    <script>
        const prayerTimes = { "fajr": "05:35", "dhuhr": "12:24", "asr": "15:25", "maghrib": "17:55", "isha": "19:13" };
        const config = { imsak: "05:20", iftar: "17:45", tarawih: "20:30" };
        const hadith = "â€¢ âœ¨ Â«ØªÙŽØ³ÙŽØ­Ù‘ÙŽØ±ÙÙˆØ§ ÙÙŽØ¥ÙÙ†Ù‘ÙŽ ÙÙÙŠ Ø§Ù„Ø³Ù‘ÙŽØ­ÙÙˆØ±Ù Ø¨ÙŽØ±ÙŽÙƒÙŽØ©Ù‹Â» â€¢ âœ¨ Â«Ø§Ù„ØµÙ‘ÙÙŠÙŽØ§Ù…Ù Ø¬ÙÙ†Ù‘ÙŽØ©ÙŒÂ» â€¢ âœ¨ Â«Ø±ÙŽÙ…ÙŽØ¶ÙŽØ§Ù†Ù Ù…ÙØ¨ÙŽØ§Ø±ÙŽÙƒÙŒÂ» â€¢ âœ¨ ";

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }
        function toggleNight() { document.body.classList.toggle('night-mode'); }
        function updateHawash(v) { document.getElementById('hawash-display').innerText = "ðŸ“¢ " + v; localStorage.setItem('hw', v); }
        function addTasbih() { let c = (parseInt(localStorage.getItem('ts') || 0)) + 1; localStorage.setItem('ts', c); document.getElementById('t-count').innerText = c; }
        function calcZakat() { let v = prompt("Capitale:"); if(v) alert("Zakat: " + (v * 0.025).toFixed(2) + "â‚¬"); }

        function showNotif(title, msg, icon) {
            const pop = document.getElementById('notif-popup');
            document.getElementById('notif-title').innerText = title;
            document.getElementById('notif-msg').innerText = msg;
            document.getElementById('notif-icon').className = "fas " + icon;
            pop.style.top = "25px";
            setTimeout(() => pop.style.top = "-250px", 10000);
        }

        function run() {
            const now = new Date();
            const time = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');
            const sec = time + ":" + now.getSeconds().toString().padStart(2,'0');

            if(sec === config.imsak + ":00") showNotif("IMSAK", "Fine Suhoor - Smetti di mangiare", "fa-utensils-slash");
            if(sec === config.iftar + ":00") showNotif("IFTAR", "Ramadan Kareem! Rompi il digiuno", "fa-moon-cloud");
            if(sec === config.tarawih + ":00") { showNotif("TARAWIH", "Ora di preghiera e Notte Serena", "fa-mosque"); document.body.classList.add('night-mode'); }

            let nextP = null;
            for(let p in prayerTimes) {
                document.getElementById('p-' + p).classList.remove('active');
                if(prayerTimes[p] <= time) document.getElementById('p-' + p).classList.add('active');
                if(!nextP && prayerTimes[p] > time) nextP = p;
            }

            if(nextP) {
                const [h, m] = prayerTimes[nextP].split(':');
                const target = new Date(); target.setHours(h, m, 0);
                const diff = target - now;
                document.getElementById('countdown').innerText = new Date(diff).toISOString().substr(11, 8);
                
                let iqM = parseInt(m) + (nextP === "fajr" ? 20 : 10);
                let iqH = parseInt(h); if(iqM >= 60) { iqM -= 60; iqH += 1; }
                document.getElementById('iqama-time').innerText = `${iqH.toString().padStart(2,'0')}:${iqM.toString().padStart(2,'0')}`;
                
                if(sec === prayerTimes[nextP] + ":00") showNotif(nextP.toUpperCase(), "Tempo di Adhan", "fa-volume-up");
            }
        }

        window.onload = () => {
            document.getElementById('hawash-display').innerText = "ðŸ“¢ " + (localStorage.getItem('hw') || "Benvenuti a Bastia Umbra");
            document.getElementById('t-count').innerText = localStorage.getItem('ts') || 0;
            document.getElementById('hadith-track').innerHTML = `<div class="hadith-text">${hadith} ${hadith}</div>`;
            setInterval(run, 1000); run();
        };
    </script>
</body>
</html>
