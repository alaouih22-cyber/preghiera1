<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramadan Premium 2026</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2319/2319830.png">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2319/2319830.png">
    
    <style>
        :root {
            --primary-dark: #00332a;
            --gradient-start: #004d40;
            --gradient-end: #00251a;
            --gold: #c19b6c;
            --soft-gold: #d4af37;
            --white: #ffffff;
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(180deg, var(--gradient-start), var(--gradient-end));
            background-attachment: fixed;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--white);
            min-height: 100vh;
        }

        /* Header Premium */
        .header {
            width: 100%;
            padding: 20px 0;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: 1px;
            position: relative;
            background: rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
        }

        .settings-icon {
            position: absolute;
            left: 20px;
            top: 20px;
            font-size: 1.6rem;
            cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .hadith-container {
            background: rgba(193, 155, 108, 0.15);
            color: var(--gold);
            padding: 10px 0;
            width: 100%;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(193, 155, 108, 0.3);
            overflow: hidden;
        }

        /* Hero Timer - Stile Immagine */
        .hero {
            width: 88%;
            max-width: 400px;
            margin: 25px 0;
            padding: 30px 20px;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        #p-name { color: var(--gold); font-size: 1.2rem; font-weight: 600; margin-bottom: 10px; }
        #timer { font-size: 3.8rem; font-weight: 900; letter-spacing: 2px; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        .post-timer {
            background: var(--gold);
            color: var(--primary-dark);
            padding: 12px;
            border-radius: 15px;
            margin-top: 15px;
            font-weight: 800;
            display: none;
            box-shadow: 0 5px 15px rgba(193, 155, 108, 0.4);
        }

        /* Liste e Card Moderne */
        .list { width: 90%; max-width: 420px; padding-bottom: 40px; }
        .card {
            background: var(--card-bg);
            margin-bottom: 12px;
            padding: 18px 25px;
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--primary-dark);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            transition: transform 0.2s;
        }

        .card.active {
            border: 3px solid var(--gold);
            background: #fff;
            transform: scale(1.03);
        }

        .card b { font-size: 1.1rem; }
        .card span { font-weight: 700; font-size: 1.1rem; color: var(--gradient-start); }

        /* Koran Section Premium */
        .koran-section {
            background: rgba(255,255,255,0.05);
            width: 85%;
            max-width: 400px;
            padding: 20px;
            border-radius: 25px;
            margin-bottom: 25px;
            border: 1px dashed var(--gold);
            text-align: center;
        }

        .koran-btn {
            background: var(--gold);
            color: white;
            padding: 12px;
            border-radius: 15px;
            text-decoration: none;
            display: block;
            margin: 10px 5px;
            font-weight: bold;
            transition: 0.3s;
        }

        /* Settings Popup */
        #settings-panel {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; width: 85%; max-width: 350px; padding: 25px; border-radius: 30px;
            box-shadow: 0 0 50px rgba(0,0,0,0.8); z-index: 100; text-align: center; color: var(--primary-dark);
        }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 90; backdrop-filter: blur(4px); }

        .btn-action {
            background: var(--gradient-start);
            color: white; border: none; padding: 15px; border-radius: 15px;
            font-weight: bold; width: 100%; margin: 10px 0; cursor: pointer;
        }

        input[type=range] { width: 100%; accent-color: var(--gold); margin-top: 10px; }
    </style>
</head>
<body>

    <div class="header">
        <span class="settings-icon" onclick="toggleSettings()">‚öôÔ∏è</span>
        ÿ±ŸÖÿ∂ÿßŸÜ ŸÉÿ±ŸäŸÖ 2026
    </div>

    <div class="hadith-container">
        <marquee id="hadith-text" scrollamount="4"></marquee>
    </div>

    <img src="https://cdn-icons-png.flaticon.com/512/2319/2319830.png" style="width:70px; margin-top:20px;">

    <div class="hero">
        <div id="p-name">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</div>
        <div id="timer">00:00:00</div>
        <div id="post-box" class="post-timer">
            ŸäŸÜÿ™ŸáŸä ŸàŸÇÿ™ ÿßŸÑÿµŸÑÿßÿ© ÿ®ÿπÿØ: <span id="post-countdown" style="direction: ltr;">00:00</span>
        </div>
    </div>

    <div class="koran-section">
        <h3 style="margin:0; color: var(--gold);">üìñ EASY KORAN</h3>
        <div style="display: flex; justify-content: center;">
            <a href="https://quran.com" target="_blank" class="koran-btn">READ</a>
            <a href="https://mp3quran.net" target="_blank" class="koran-btn">LISTEN</a>
        </div>
    </div>

    <div id="overlay" class="overlay" onclick="toggleSettings()"></div>
    <div id="settings-panel">
        <h2 style="margin-top:0;">Impostazioni</h2>
        <button id="notif-btn" class="btn-action" onclick="askPermission()">üîî ATTIVA NOTIFICHE ADHAN</button>
        <button id="stop-btn" class="btn-action" style="background: #d32f2f; display:none;" onclick="stopAdhan()">‚èπ FERMA ADHAN</button>
        
        <div style="margin: 20px 0; direction: ltr;">
            <label style="font-weight:bold;">üîä VOLUME</label>
            <input type="range" id="volControl" min="0" max="1" step="0.1" value="0.7">
        </div>
        
        <button class="btn-action" style="background:#555" onclick="toggleSettings()">CHIUDI</button>
    </div>

    <div class="list" id="grid"></div>

<script>
    // Dati (Esempio, aggiungere altri giorni)
    const data = [{"d":"24/2","f":"05:36","dh":"12:24","a":"15:25","m":"17:54","i":"19:12"},{"d":"25/2","f":"05:35","dh":"12:24","a":"15:25","m":"17:55","i":"19:13"},{"d":"26/2","f":"05:33","dh":"12:24","a":"15:26","m":"17:56","i":"19:15"},{"d":"27/2","f":"05:31","dh":"12:24","a":"15:27","m":"17:57","i":"19:16"}];
    
    const names = {"Fajr":"ÿßŸÑŸÅÿ¨ÿ±","Dhuhr":"ÿßŸÑÿ∏Ÿáÿ±","Asr":"ÿßŸÑÿπÿµÿ±","Maghrib":"ÿßŸÑŸÖÿ∫ÿ±ÿ®","Ishaa":"ÿßŸÑÿπÿ¥ÿßÿ°"};
    const hadiths = ["ŸÇÿßŸÑ Ô∑∫: ŸÖŸéŸÜŸí ÿµŸéÿßŸÖŸé ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸé ÿ•ŸêŸäŸÖŸéÿßŸÜŸãÿß ŸàŸéÿßÿ≠Ÿíÿ™Ÿêÿ≥Ÿéÿßÿ®Ÿãÿß ÿ∫ŸèŸÅŸêÿ±Ÿé ŸÑŸéŸáŸè ŸÖŸéÿß ÿ™ŸéŸÇŸéÿØŸëŸéŸÖŸé ŸÖŸêŸÜŸí ÿ∞ŸéŸÜŸíÿ®ŸêŸáŸê"];
    document.getElementById('hadith-text').innerText = " ‚Ä¢ " + hadiths.join(" ‚Ä¢ ");

    let lastNotified = "";
    const audio = new Audio('https://www.islamcan.com/audio/adhan/azan1.mp3');

    function toggleSettings() {
        const p = document.getElementById('settings-panel');
        const o = document.getElementById('overlay');
        p.style.display = (p.style.display === 'block') ? 'none' : 'block';
        o.style.display = (o.style.display === 'block') ? 'none' : 'block';
    }

    function askPermission() {
        Notification.requestPermission().then(p => {
            if(p === "granted") {
                localStorage.setItem("adhanEnabled", "true");
                document.getElementById('notif-btn').innerText = "‚úÖ SISTEMA ATTIVO";
                audio.play(); setTimeout(() => audio.pause(), 1000);
            }
        });
    }

    function stopAdhan() { audio.pause(); document.getElementById('stop-btn').style.display = 'none'; }

    function update() {
        const now = new Date();
        const dStr = now.getDate() + "/" + (now.getMonth() + 1);
        const today = data.find(x => x.d === dStr);
        if(!today) return;

        const prayers = [{n:"Fajr",t:today.f}, {n:"Dhuhr",t:today.dh}, {n:"Asr",t:today.a}, {n:"Maghrib",t:today.m}, {n:"Ishaa",t:today.i}];
        let listHTML = "", nextFound = false;

        prayers.forEach(p => {
            const [h, m] = p.t.split(":");
            const pTime = new Date(); pTime.setHours(h, m, 0);
            const diff = pTime - now;

            const postDuration = (p.n === "Fajr") ? 30*60*1000 : 10*60*1000;
            if (diff <= 0 && diff > -postDuration) {
                document.getElementById('post-box').style.display = 'block';
                const rem = postDuration + diff;
                const rM = Math.floor(rem/60000).toString().padStart(2,"0");
                const rS = Math.floor((rem%60000)/1000).toString().padStart(2,"0");
                document.getElementById('post-countdown').innerText = rM + ":" + rS;
            }

            const timeNow = now.getHours().toString().padStart(2,"0")+":"+now.getMinutes().toString().padStart(2,"0");
            if (timeNow === p.t && lastNotified !== p.t) {
                if(localStorage.getItem("adhanEnabled") === "true") {
                    new Notification("üåô " + names[p.n]);
                    audio.volume = document.getElementById('volControl').value;
                    audio.play();
                    document.getElementById('stop-btn').style.display = 'block';
                }
                lastNotified = p.t;
            }

            if(diff > 0 && !nextFound) {
                nextFound = true;
                document.getElementById("p-name").innerText = names[p.n] + " AL PROSSIMO";
                const hh = Math.floor(diff/3600000).toString().padStart(2,"0");
                const mm = Math.floor((diff%3600000)/60000).toString().padStart(2,"0");
                const ss = Math.floor((diff%60000)/1000).toString().padStart(2,"0");
                document.getElementById("timer").innerText = hh + ":" + mm + ":" + ss;
            }
            const active = (diff <= 0 && diff > -1800000);
            listHTML += `<div class="card ${active?'active':''}"><b>${names[p.n]}</b><span>${p.t}</span></div>`;
        });
        document.getElementById("grid").innerHTML = listHTML;
    }

    if(localStorage.getItem("adhanEnabled") === "true") {
        document.getElementById('notif-btn').innerText = "‚úÖ SISTEMA ATTIVO";
    }

    setInterval(update, 1000);
    update();
</script>
</body>
</html>
