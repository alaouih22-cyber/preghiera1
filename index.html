<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#004F3F">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="prayer-icon.png">

    <title>PrayerTimes Bastia Umbra</title>
    <style>
        /* === TUTTO IL TUO CSS ORIGINALE === */
        :root {
            --mp-dark-green: #004F3F;
            --mp-gold: #C5A059;
            --mp-bg: #F6F7F9;
            --white: #ffffff;
            --glow-color: rgba(197, 160, 89, 0.6);
        }
        body { ... } /* Tutto il CSS resta intatto */
        body.night-mode { ... }
        .ramadan-header { ... }
        .fanous-svg { ... }
        .ramadan-title { ... }
        .dashboard { ... }
        .dash-card { ... }
        .timer-main { ... }
        .date-value { ... }
        .label-small { ... }
        .prayer-list { ... }
        .prayer-card { ... }
        .prayer-card.active { ... }
        .p-name { ... }
        .p-time { ... }
        .hadith-footer { ... }
        .hadith-track { ... }
        .hadith-text { ... }
        @keyframes scroll-hadith { ... }
        @keyframes swing { ... }
        .sidebar { ... }
        .sidebar.open { ... }
        .sidebar-header { ... }
        .settings-group { ... }
        .settings-label { ... }
        .mp-select, .mp-btn-side { ... }
        .menu-btn { ... }
    </style>
</head>
<body id="main-body">

    <audio id="athanAudio"></audio>
    <audio id="bipAudio" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <!-- === HEADER === -->
    <div class="ramadan-header">
        <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
        <svg class="fanous-svg" viewBox="0 0 512 512"><path d="..."/></svg>
        <h1 class="ramadan-title">Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ</h1>
        <svg class="fanous-svg" viewBox="0 0 512 512"><path d="..."/></svg>
    </div>

    <!-- === SIDEBAR === -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span style="font-size:24px; color:var(--mp-gold); font-weight:bold;">PrayerTimes</span>
            <div style="font-size:30px; cursor:pointer;" onclick="toggleMenu()">&times;</div>
        </div>
        <div class="settings-group">
            <label class="settings-label">ğŸ”” Ù†ÙˆØ¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ (Tipo Notifica)</label>
            <select id="notif-type" class="mp-select">
                <option value="athan">Ø£Ø°Ø§Ù† + Ø¥Ø´Ø¹Ø§Ø± (Athan + Notifica)</option>
                <option value="bip">Ø±Ù†ÙŠÙ† + Ø¥Ø´Ø¹Ø§Ø± (Bip + Notifica)</option>
            </select>
        </div>
        <div class="settings-group">
            <label class="settings-label">ğŸ”Š Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¤Ø°Ù† (Scegli Athan)</label>
            <select id="athan-source" class="mp-select">
                <option value="https://www.islamcan.com/audio/adhan/azan1.mp3">Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø© (Makkah)</option>
                <option value="https://www.islamcan.com/audio/adhan/azan2.mp3">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø© (Medina)</option>
                <option value="https://www.islamcan.com/audio/adhan/azan3.mp3">Ø§Ù„Ø£Ù‚ØµÙ‰ (Al-Aqsa)</option>
                <option value="adhan.mp3">Ø§ÙØªØ±Ø§Ø¶ÙŠ (Default Local)</option>
            </select>
        </div>
        <button class="mp-btn-side" onclick="enableNotifs()">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª (Attiva Banner)</button>
        <button class="mp-btn-side" style="background:transparent; color:var(--mp-gold);" onclick="adminDash()">Ø§Ø®ØªØ¨Ø§Ø± (Test Audio PIN 2026)</button>
    </div>

    <!-- === DASHBOARD === -->
    <div class="dashboard">
        <div class="dash-card">
            <span class="label-small">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… - Data</span>
            <span class="date-value" id="hijri-date-full">...</span>
            <span class="date-value" id="greg-date-full" style="opacity:0.6; font-size:11px;">...</span>
        </div>
        <div class="dash-card">
            <span class="label-small" id="next-prayer-label">Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</span>
            <span class="timer-main" id="timer-next">00:00:00</span>
        </div>
    </div>

    <div class="prayer-list" id="list-container"></div>

    <div class="hadith-footer">
        <div class="hadith-track">
            <div class="hadith-text"> ... </div>
            <div class="hadith-text"> ... </div>
        </div>
    </div>

    <script>
        /* === TUTTI GLI SCRIPT ORIGINALE === */
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('App PrayerTimes: Pronto'))
                .catch(err => console.log('Errore SW:', err));
            });
        }

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }
        function killPlayerWidget() { ... }
        function playSound() { ... }
        function enableNotifs() { ... }
        function adminDash() { ... }
        function sendPush(title, body) { ... }

        const times = { ... }; 
        const prayerNames = { ... };
        const prayerIcons = { ... };

        function update() { ... }
        setInterval(update, 1000);
        update();
    </script>
</body>
</html>
